{% extends 'layouts/head.html' %}
{% block head %}
<h1>{{ title }}</h1>

<form method="POST" action="">

  <div class="card-body">
    
    <!--Validación de errores-->
    {% csrf_token %} 
    {% if stage_formset.errors %}
    <div class="alert alert-danger alert-dismissible">
      <button
        type="button"
        class="close"
        data-dismiss="alert"
        aria-hidden="true"
      >
        ×
      </button>
      <h4><i class="icon fa fa-ban"></i> Ha ocurrido un error</h4>
      {% for field in stage_formset %} 
        {% for error in field.errors %}
          <li>{{ error }}</li>
        {% endfor %} 
      {% endfor %}
    </div>
    {% endif %}

    <div class="row">
        <a href="#" class="btn btn-outline-warning">Crear una nueva fase</a>
    </div>

    {{ stage_formset.management_form }}
    <h4>Seleccione las fases y sus jerarquías</h4>
    {% for stage_form in stage_formset %}
        <div>
            {{ stage_form.id_fase }}
            {{ stage_form.jerarquia }}
        </div>
    {% endfor %}
  </div>

  <div class="card-footer">
    <button type="submit" class="btn btn-primary btn-flat">
      <i class="fas fa-save"></i> {{ botton_title }}
    </button>
  </div>

</form>
{% endblock %}
